{
	"name": "ai-spleen-seg",
	"version": "1.0.0",
	"description": "AI Spleen Segmentation",
	"informatics_gateway": {
		"ae_title": "MONAI-DEPLOY",
		"data_origins": [
			"ORTHANC"
		],
		"export_destinations": [
			"ORTHANC"
		]
	},
	"tasks": [
		{
			"id": "spleen",
			"description": "Execute Spleen Segmentation MAP",
			"type": "docker",
			"args": {
				"container_image": "ghcr.io/mmelqin/monai_ai_lung_seg_app:1.0",
				"server_url": "unix:///var/run/docker.sock",
				// "server_url": "http://172.29.0.1:2375",
				"entrypoint": "/bin/bash,-c",
				"command": "python3 -u /opt/monai/app/app.py",
				"task_timeout_minutes": "5",
				"temp_storage_container_path": "/var/lib/monai/",
				"temp_storage_host_path": "/home/vicchang/sc/monai/monai-deploy/deploy/docker-compose/.md/mdtm",
				"env_MONAI_INPUTPATH": "/var/monai/input/",
				"env_MONAI_OUTPUTPATH": "/var/monai/output/",
				"env_MONAI_MODELPATH": "/opt/monai/models/",
				"env_MONAI_WORKDIR": "/var/monai/"
			},
			"artifacts": {
				"input": [
					{
						"name": "env_MONAI_INPUTPATH",
						"value": "{{ context.input.dicom }}"
					}
				],
				"output": [
					{
						"name": "env_MONAI_OUTPUTPATH",
						"mandatory": true
					}
				]
			},
			"task_destinations": [
				{
					"name": "export-spleen-seg"
				}
			]
		},
		{
			"id": "export-spleen-seg",
			"description": "Export Segmentation Storage Object",
			"type": "export",
			"export_destinations": [
				{
					"Name": "ORTHANC"
				}
			],
			"artifacts": {
				"input": [
					{
						"name": "report-dicom",
						"value": "{{ context.executions.spleen.artifacts.env_MONAI_INPUTPATH }}",
						"mandatory": true
					}
				],
				"output": []
			}
		}
	]
}